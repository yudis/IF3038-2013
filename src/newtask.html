<html>
<head>
<title>Insert New Task</title>
<link href="styles/newtask.css" rel="stylesheet" type="text/css" />
<script>
	var fullPath = "empty";
</script>
<script>
	function makeTgl(){
		for(var i=1; i<=31; i++){
			var isi=document.createTextNode(i);
			var opsi = document.createElement("option");
			opsi.setAttribute("value",i);
			opsi.appendChild(isi);
			document.getElementById("tgl").appendChild(opsi);
		}
	}
</script>
<script>
	function makeThn(){
		for(var i=1955; i<=2013; i++){
			var isi=document.createTextNode(i);
			var opsi = document.createElement("option");
			opsi.setAttribute("value",i);
			opsi.appendChild(isi);
			document.getElementById("thn").appendChild(opsi);
		}
	}
</script>
<script>
	function enableAddTask(){
		document.getElementById("addtask_button").disabled = false;
	}
</script>
<script>
	function checkTaskName(taskName){
		var pattern = /[^a-zA-Z0-9 ]/
		var l = taskName.length;
		if(!pattern.test(taskName) && l <= 25){         
			document.getElementById('v_tname').innerHTML='<font color="green">Benar</font>'; 
			return true;
		}else{   
			document.getElementById('v_tname').innerHTML='<font color="red">Nama task hanya boleh menggunakan karakter alphanumeric</font>';
			return false;
		}
	}
</script>
<script>
	function checkAssignee(assignee){
		var pattern = /[a-zA-Z] [a-zA-Z]/
		if(pattern.test(assignee)){         
			document.getElementById('v_assignee').innerHTML='<font color="green">Benar</font>'; 
			return true;
		}else{   
			document.getElementById('v_assignee').innerHTML='<font color="red">Nama assignee minimal terdiri dari 2 frasa</font>';
			return false;
		}
	}
</script>
<script>
	function checkAttachment(attachment) {
		attachment = attachment.substring(attachment.lastIndexOf('.')+1);
		if (attachment) {
			var startIndex = (attachment.indexOf('\\') >= 0 ? fullPath.lastIndexOf('\\') : fullPath.lastIndexOf('/'));
			var filename = attachment.substring(startIndex);
			if (filename.indexOf('\\') === 0 || filename.indexOf('/') === 0)
				filename = filename.substring(1);
			alert(filename);
			if(filename == "docx"|| filename == "jpeg" || filename == "bmp" || filename == "gif" || filename == "pdf" || filename == "doc" 
				|| filename == "docx" || filename == "xls" || filename == "xlsx" || filename == "ppt" || filename == "pptx" || filename == "mp4"
				|| filename == "ogg"|| filename == "webm"|| filename == "3gp"){         
				document.getElementById('v_attachment').innerHTML='<font color="green">File attachment valid</font>'; 
				return true;
			}else{   
				document.getElementById('v_attachment').innerHTML='<font color="red">File attachment tidak valid</font>';
				return false;
			}
		}
	}
</script>
</head>

<body onload="makeTgl();makeThn();">
	<div id="container">
		<div id="header" align="left">
        	<img src="../images/header.png"/>
        </div>
		<div class=logo id="logo" align="left">
			<a href="dashboard.html">
				<img src="../images/headerlogo.png">
			</a>
        </div>
		<div id="space" align="left">
        	
        </div>
		<div id="search" align="left">
        	
        </div>
		<div class="menu" id="home">
			<a href="dashboard.html">Home</a>
        </div>
		<div class="menu" id="profile">
        	<a href="profile.html">Profile</a>
        </div>
		<div class="menu" id="logout">
        	<a href="home.html">Logout</a>
        </div>
		<div id="leftspace">
        	
        </div>
		<div id="newtask">
        	<form name="newtask_form">
				<div id="formulir">
					<div class="form_field">
						<div>
							Nama Tugas: 
						</div>
						<div>
							<input name="taskname" type="text" size="35" maxlength="256" onkeyup="checkTaskName(document.newtask_form.taskname.value)">
						</div>
						<div id="v_tname">
						</div>
					</div>
					<div class="form_field">
						<div>
							Attachment: 
						</div>
						<div>
							<input type="file" name="attachment" id="upload" onchange="checkAttachment(document.newtask_form.attachment.value)">
						</div>
						<div id="v_attachment">
						</div>
					</div>
					<div class="form_field">
						<div>
							Deadline: 
						</div>
						<div>
							<select name="tanggal" id="tgl">
								<option>--Tanggal--</option>
							</select>
							<select name="bulan">
								<option>--Bulan--</option>
								<option value="Januari">Januari</option>
								<option value="Februari">Februari</option>
								<option value="Maret">Maret</option>
								<option value="April">April</option>
								<option value="Mei">Mei</option>
								<option value="Juni">Juni</option>
								<option value="Juli">Juli</option>
								<option value="Agustus">Agustus</option>
								<option value="September">September</option>
								<option value="Oktober">Oktober</option>
								<option value="November">November</option>
								<option value="Desember">Desember</option>
							</select>
							<select name="tahun" id="thn">
								<option>--Tahun--</option>
							</select>
						</div>
						<div id="v_deadline">
						</div>
					</div>
					<div class="form_field">
						<div>
							Assignee: 
						</div>
						<div>
							<input type="text" name="assignee" size="35" maxlength="256" onkeyup="checkAssignee(document.newtask_form.assignee.value)">
						</div>
						<div id="v_assignee">
						</div>
					</div>
					<div class="form_field">
						<div>
							Tag: 
						</div>
						<div>
							<input type="text" name="tag" size="35" maxlength="256">
						</div>
						<div id="v_tag">
						</div>
					</div>
					<div class="form_field">
						<div>
							<input type="submit" value="Add Task" disabled id="addtask_button">
						</div>
						<div>
						</div>
					</div>
				</div>
			</form>
        </div>
		<div id="rightspace">
        	
        </div>
	</div>
</body>
</html>