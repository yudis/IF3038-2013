var isEdited = [0, 0, 0, 0, 0];function loadProfile(username, edited){    //alert(username);    //alert(edited);    var xmlhttp = createAJAX();    xmlhttp.onreadystatechange = function()    {        //alert(xmlhttp.readyState+ " " +xmlhttp.status);        if (xmlhttp.readyState == 4 && xmlhttp.status == 200)        {            $("id", "initprofile").innerHTML = xmlhttp.responseText;        }    };    var parameters = "u=" + username + "&e=" + edited;    //alert("parameters: " + parameters);    postAJAX(xmlhttp, "loadprofile.jsp", parameters);}function editProfile(username, e, fullname, email, dob, temp1, temp2){    window.location = "editprofileform.jsp?u=" + username + "&e=" + e + "&fullname=" + fullname + "&email=" + email + "&dob=" + dob + "&photo=" + temp1 + "&p=" + temp2;}function getName(index){    if (index == 0)    {        return "fullname";    }    else if (index == 1)    {        return "email";    }    else if (index == 2)    {        return "password";    }    else if (index == 3)    {        return "dob";    }    else if (index == 4)    {        return "avatar";    }}function checkEdited(attribute){    var xmlhttp = createAJAX();    xmlhttp.onreadystatechange = function()    {        /*         if(xmlhttp.readyState == 4 && xmlhttp.status == 200)         {         alert(xmlhttp.responseText);         isEdited[getIndex(attribute.id)] = xmlhttp.responseText;                  if (isEdited[getIndex(attribute.id)] == 0)         {         alert("isEdited["+ getIndex(attribute.id) +"]: " + isEdited[getIndex(attribute.id)]);		         }			         else{alert("true");}         //$("id", "initprofile").innerHTML = xmlhttp.responseText;         }         */    };    var parameters = "type=" + attribute.id + "&value=" + attribute.value;    postAJAX(xmlhttp, "checkedited.jsp", parameters);}function upload(data){    setEdited(4);    //alert(file);    var xmlhttp = createAJAX();    xmlhttp.onreadystatechange = function()    {        alert(xmlhttp.readyState + " " + xmlhttp.status);        if (xmlhttp.readyState == 4 && xmlhttp.status == 200)        {            alert(xmlhttp.responseText);            //$("id", "avatar").innerHTML = xmlhttp.responseText;        }    };    var parameters = "file=" + data;    //alert(parameters);    var header = "multipart/form-data; boundary=--_01C922E9.D3E367F0";    //xmlhttp.open("GET", "upload.jsp?" + parameters, true);    //xmlhttp.setRequestHeader("Content-type", header);    //xmlhttp.send();    //postAJAX(xmlhttp, "upload.jsp", parameters);    postAJAX2(xmlhttp, "../upload.jsp", header, parameters);}function setEdited(index){    //var filename = data.value.split('\\').pop();    //$("id", "filename").value = $("id", "filename").value.split('\\').pop();    isEdited[index] = 1; // getIndex("avatar")}function submitChange(){    //alert("masuk");    var edited = false;    var j = 0;    var data = "Data yang diubah: ";    for (var i = 0; i < isEdited.length; ++i)    {         alert(isEdited[i] + " " + j);        if (isEdited[i] == 1)        {            edited = true;            data += getName(i) + ((i == 4) ? ". " : ", ");        }        ++j;    }        alert(data);        if (edited)    {        var username = JSON.parse(localStorage.getItem("key")).username;        //alert("masuk");        var fullname = $("id", "fullname").value;        var email = $("id", "email").value;        var password = $("id", "password").value;        var dob = $("id", "dob").value;        var avatar = "a";//$("id", "avatar2").src.split('/').pop();        var xmlhttp = createAJAX();        xmlhttp.onreadystatechange = function()        {            alert(xmlhttp.readyState + " " + xmlhttp.status);            if (xmlhttp.readyState == 4 && xmlhttp.status == 200)            {                alert(xmlhttp.responseText);            }        };                var parameters = "u=" + username;// + "&fullname=" + fullname + "&email=" + email + "&dob=" + dob + "&photo=" + avatar + "&password=" + password;        postAJAX(xmlhttp, "profilesubmit.jsp", parameters);    }    else    {        alert("No changes");        window.location = "index.jsp?u=" + username + "&e=1";    }        isEdited = [0, 0, 0, 0, 0];}